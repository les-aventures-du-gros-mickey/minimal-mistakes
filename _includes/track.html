<div id="{{ include.id }}" style="height: 400px;"></div>
<p></p>
<script>
  var {{ include.id }}_layers = {
    "OSM": L.tileLayer(
      "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
      { attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>' }
    ),
    "IGN": L.tileLayer(
      "https://wxs.ign.fr/choisirgeoportail/geoportail/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.MAPS&STYLE=normal&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&FORMAT=image%2Fjpeg",
      { attribution: '&copy; <a href="http://www.ign.fr/">IGN</a>' }
    )
  };
  {{ include.id }}_map = L.map('{{ include.id }}',
    { layers: [{{ include.id }}_layers.OSM] }
  );
  var {{ include.id }}_track = new L.GPX(
    "/assets/tracks/{{ include.file }}",
    { async: true }
  ).on(
    "loaded",
    function(e) { {{ include.id }}_map.fitBounds(e.target.getBounds()); }
  );
  {{ include.id }}_map.addLayer({{ include.id }}_track);
  L.control.scale().addTo({{ include.id }}_map);
  L.control.layers({{ include.id }}_layers).addTo({{ include.id }}_map);
  {{ include.id }}_map.addControl(new L.control.fullscreen());
</script>
